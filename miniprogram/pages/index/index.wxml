<side-menu
  show-menu="{{showMenu}}"
  user-stamps="{{userStamps}}"
  heatmap-data="{{heatmapData}}"
  bind:close="closeSideMenu"
/>

<view class="container">
  <!-- é¡µå¤´ï¼šèœå•æŒ‰é’® + æ ‡é¢˜ + æœç´¢å›¾æ ‡ -->
  <view class="header" style="padding-top: {{statusBarHeight + 8}}px">
    <text class="menu-toggle" bindtap="toggleSideMenu">â˜°</text>
    <text class="header-title">æˆ‘çš„ç¬”è®°</text>
    <text class="search-icon" bindtap="showSearchInput">ğŸ”</text>
  </view>

  <!-- æœç´¢æ¡† -->
  <view wx:if="{{showSearch}}" class="search-container">
    <input
      class="search-input"
      placeholder="æœç´¢ç¬”è®°..."
      value="{{searchKeyword}}"
      bindinput="onSearchInput"
      focus="{{searchFocus}}"
    />
    <text class="search-close" bindtap="hideSearchInput">âœ•</text>
  </view>

  <!-- æµ®åŠ¨æ·»åŠ æŒ‰é’® -->
  <view class="float-add-button" bindtap="goToWrite">
    <text class="float-add-icon">+</text>
  </view>

  <!-- ç¬”è®°åˆ—è¡¨ -->
  <scroll-view scroll-y="true" class="notes-list" scroll-with-animation="{{true}}">
    <view wx:if="{{displayLetters.length === 0}}" class="empty-state">
      <text class="empty-icon">ğŸ“</text>
      <text class="empty-text">è¿˜æ²¡æœ‰ç¬”è®°å‘¢</text>
      <text class="empty-subtext">ç‚¹å‡»å³ä¸Šè§’ + å¼€å§‹å†™ç¬¬ä¸€ç¯‡</text>
    </view>

    <view
      wx:for="{{displayLetters}}"
      wx:key="_id"
      class="note-card"
      bindtap="goToDetail"
      bindlongpress="deleteLetter"
      data-id="{{item._id}}"
    >
      <view class="note-content-preview">{{item.content}}</view>

      <view class="note-footer">
        <text class="note-date">{{item.displayDate || 'åˆšåˆš'}}</text>
      </view>
    </view>
  </scroll-view>
</view>
