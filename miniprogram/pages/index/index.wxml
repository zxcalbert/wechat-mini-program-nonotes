<side-menu 
  show-menu="{{showMenu}}"
  user-stamps="{{userStamps}}"
  heatmap-data="{{heatmapData}}"
  bind:close="closeSideMenu"
/>

<view class="container">
  <!-- é¡µå¤´ï¼šèœå•æŒ‰é’® + æ ‡é¢˜ -->
  <view class="header">
    <text class="menu-toggle" bindtap="toggleSideMenu">â˜°</text>
    <text class="header-title">æˆ‘çš„ç¬”è®°</text>
  </view>

  <!-- ç¬”è®°åˆ—è¡¨ -->
  <scroll-view scroll-y="true" class="notes-list">
    <view wx:if="{{letters.length === 0}}" class="empty-state">
      <text class="empty-icon">ğŸ“</text>
      <text class="empty-text">è¿˜æ²¡æœ‰ç¬”è®°å‘¢</text>
      <text class="empty-subtext">ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®å¼€å§‹å†™ç¬¬ä¸€ç¯‡</text>
    </view>

    <view 
      wx:for="{{letters}}" 
      wx:key="_id" 
      class="note-card"
      bindtap="goToDetail"
      bindlongpress="deleteLetter"
      data-id="{{item._id}}"
    >
      <view class="note-header">
        <text class="note-mood">{{item.mood}}</text>
        <text class="note-mentor">è‡´{{item.mentor || 'æŸ¥ç†Â·èŠ’æ ¼'}}</text>
      </view>
      
      <view class="note-content-preview">{{item.content}}</view>
      
      <view class="note-footer">
        <text class="note-date">{{item.displayDate || 'åˆšåˆš'}}</text>
        <view class="note-status {{item.status}}">
          <text wx:if="{{item.status === 'replied'}}">å·²å›å¤</text>
          <text wx:elif="{{item.status === 'pending'}}">å¾…å›å¤</text>
          <text wx:else>{{item.status}}</text>
        </view>
      </view>
    </view>
  </scroll-view>

  <!-- æµ®åŠ¨å†™ç¬”è®°æŒ‰é’® -->
  <view class="fab-button" bindtap="goToWrite">
    <text class="fab-icon">+</text>
  </view>
</view>